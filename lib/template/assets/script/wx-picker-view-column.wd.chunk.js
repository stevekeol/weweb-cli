webpackJsonp([13],{290:function(t,i,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=!function(){function t(t,i,n){function e(i,n,s,o){if(!i||!i.cancelled){s(n);var r=t.done();r||i.cancelled||(i.id=requestAnimationFrame(e.bind(null,i,n,s,o))),r&&o&&o(n)}}function s(t){t&&t.id&&cancelAnimationFrame(t.id),t&&(t.cancelled=!0)}var o={id:0,cancelled:!1};return e(o,t,i,n),{cancel:s.bind(null,o),model:t}}function i(t){this._drag=t,this._dragLog=Math.log(t),this._x=0,this._v=0,this._startTime=0}function n(t,i,n){return t>i-n&&t<i+n}function e(t,i){return n(t,0,i)}function s(t,i,n){this._m=t,this._k=i,this._c=n,this._solution=null,this._endPosition=0,this._startTime=0}function o(t){this._extent=t,this._friction=new i(.01),this._spring=new s(1,90,20),this._startTime=0,this._springing=!1,this._springOffset=0}function r(t,i,n){this._element=t,this._extent=this._element.offsetHeight-this._element.parentElement.offsetHeight;var e=-i*n;e>0?e=0:e<-this._extent&&(e=-this._extent),this._position=e,this._scroll=new o(this._extent),this._onTransitionEnd=this.onTransitionEnd.bind(this),this._itemHeight=n;var s="translateY("+e+"px)";this._element.style.webkitTransform=s,this._element.style.transform=s}i.prototype.set=function(t,i){this._x=t,this._v=i,this._startTime=(new Date).getTime()},i.prototype.x=function(t){void 0===t&&(t=((new Date).getTime()-this._startTime)/1e3);var i;return i=t===this._dt&&this._powDragDt?this._powDragDt:this._powDragDt=Math.pow(this._drag,t),this._dt=t,this._x+this._v*i/this._dragLog-this._v/this._dragLog},i.prototype.dx=function(t){void 0===t&&(t=((new Date).getTime()-this._startTime)/1e3);var i;return i=t===this._dt&&this._powDragDt?this._powDragDt:this._powDragDt=Math.pow(this._drag,t),this._dt=t,this._v*i},i.prototype.done=function(){return Math.abs(this.dx())<3},i.prototype.reconfigure=function(t){var i=this.x(),n=this.dx();this._drag=t,this._dragLog=Math.log(t),this.set(i,n)},i.prototype.configuration=function(){var t=this;return[{label:"Friction",read:function(){return t._drag},write:function(i){t.reconfigure(i)},min:.001,max:.1,step:.001}]};var h=.1;s.prototype._solve=function(t,i){var n=this._c,e=this._m,s=this._k,o=n*n-4*e*s;if(0==o){var r=-n/(2*e),h=t,a=i/(r*t);return{x:function(t){return(h+a*t)*Math.pow(Math.E,r*t)},dx:function(t){var i=Math.pow(Math.E,r*t);return r*(h+a*t)*i+a*i}}}if(o>0){var _=(-n-Math.sqrt(o))/(2*e),c=(-n+Math.sqrt(o))/(2*e),a=(i-_*t)/(c-_),h=t-a;return{x:function(t){var i,n;return t===this._t&&(i=this._powER1T,n=this._powER2T),this._t=t,i||(i=this._powER1T=Math.pow(Math.E,_*t)),n||(n=this._powER2T=Math.pow(Math.E,c*t)),h*i+a*n},dx:function(t){var i,n;return t===this._t&&(i=this._powER1T,n=this._powER2T),this._t=t,i||(i=this._powER1T=Math.pow(Math.E,_*t)),n||(n=this._powER2T=Math.pow(Math.E,c*t)),h*_*i+a*c*n}}}var u=Math.sqrt(4*e*s-n*n)/(2*e),r=-n/2*e,h=t,a=(i-r*t)/u;return{x:function(t){return Math.pow(Math.E,r*t)*(h*Math.cos(u*t)+a*Math.sin(u*t))},dx:function(t){var i=Math.pow(Math.E,r*t),n=Math.cos(u*t),e=Math.sin(u*t);return i*(a*u*n-h*u*e)+r*i*(a*e+h*n)}}},s.prototype.x=function(t){return void 0==t&&(t=((new Date).getTime()-this._startTime)/1e3),this._solution?this._endPosition+this._solution.x(t):0},s.prototype.dx=function(t){return void 0==t&&(t=((new Date).getTime()-this._startTime)/1e3),this._solution?this._solution.dx(t):0},s.prototype.setEnd=function(t,i,n){if(n||(n=(new Date).getTime()),t!=this._endPosition||!e(i,h)){i=i||0;var s=this._endPosition;this._solution&&(e(i,h)&&(i=this._solution.dx((n-this._startTime)/1e3)),s=this._solution.x((n-this._startTime)/1e3),e(i,h)&&(i=0),e(s,h)&&(s=0),s+=this._endPosition),this._solution&&e(s-t,h)&&e(i,h)||(this._endPosition=t,this._solution=this._solve(s-this._endPosition,i),this._startTime=n)}},s.prototype.snap=function(t){this._startTime=(new Date).getTime(),this._endPosition=t,this._solution={x:function(){return 0},dx:function(){return 0}}},s.prototype.done=function(t){return t||(t=(new Date).getTime()),n(this.x(),this._endPosition,h)&&e(this.dx(),h)},s.prototype.reconfigure=function(t,i,n){this._m=t,this._k=i,this._c=n,this.done()||(this._solution=this._solve(this.x()-this._endPosition,this.dx()),this._startTime=(new Date).getTime())},s.prototype.springConstant=function(){return this._k},s.prototype.damping=function(){return this._c},s.prototype.configuration=function(){function t(t,i){t.reconfigure(1,i,t.damping())}function i(t,i){t.reconfigure(1,t.springConstant(),i)}return[{label:"Spring Constant",read:this.springConstant.bind(this),write:t.bind(this,this),min:100,max:1e3},{label:"Damping",read:this.damping.bind(this),write:i.bind(this,this),min:1,max:500}]},o.prototype.snap=function(t,i){this._springOffset=0,this._springing=!0,this._spring.snap(t),this._spring.setEnd(i)},o.prototype.set=function(t,i){this._friction.set(t,i),t>0&&i>=0?(this._springOffset=0,this._springing=!0,this._spring.snap(t),this._spring.setEnd(0)):(t<-this._extent&&i<=0?(this._springOffset=0,this._springing=!0,this._spring.snap(t),this._spring.setEnd(-this._extent)):this._springing=!1,this._startTime=(new Date).getTime())},o.prototype.x=function(t){if(!this._startTime)return 0;if(t||(t=((new Date).getTime()-this._startTime)/1e3),this._springing)return this._spring.x()+this._springOffset;var i=this._friction.x(t),n=this.dx(t);return(i>0&&n>=0||i<-this._extent&&n<=0)&&(this._springing=!0,this._spring.setEnd(0,n),i<-this._extent?this._springOffset=-this._extent:this._springOffset=0,i=this._spring.x()+this._springOffset),i},o.prototype.dx=function(t){return this._springing?this._spring.dx(t):this._friction.dx(t)},o.prototype.done=function(){return this._springing?this._spring.done():this._friction.done()},o.prototype.configuration=function(){var t=this._friction.configuration();return t.push.apply(t,this._spring.configuration()),t};r.prototype.onTouchStart=function(){this._startPosition=this._position,this._startPosition>0?this._startPosition/=.5:this._startPosition<-this._extent&&(this._startPosition=(this._startPosition+this._extent)/.5-this._extent),this._animation&&this._animation.cancel();var t=this._position,i="translateY("+t+"px)";this._element.style.webkitTransform=i,this._element.style.transform=i},r.prototype.onTouchMove=function(t,i){var n=i+this._startPosition;n>0?n*=.5:n<-this._extent&&(n=.5*(n+this._extent)-this._extent),this._position=n;var e="translateY("+n+"px) translateZ(0)";this._element.style.webkitTransform=e,this._element.style.transform=e},r.prototype.onTouchEnd=function(i,n,e){var s=this;if(this._position>-this._extent&&this._position<0&&(Math.abs(n)<34&&Math.abs(e.y)<300||Math.abs(e.y)<150))return void s.snap();this._scroll.set(this._position,e.y),this._animation=t(this._scroll,function(){var t=s._scroll.x();s._position=t;var i="translateY("+t+"px) translateZ(0)";s._element.style.webkitTransform=i,s._element.style.transform=i},function(){s.snap()})},r.prototype.onTransitionEnd=function(){this._snapping=!1,this._element.style.transition="",this._element.style.webkitTransition="",this._element.removeEventListener("transitionend",this._onTransitionEnd),this._element.removeEventListener("webkitTransitionEnd",this._onTransitionEnd),"function"==typeof this.snapCallback&&this.snapCallback(Math.floor(Math.abs(this._position)/this._itemHeight))},r.prototype.snap=function(){var t=this._itemHeight,i=this._position%t,n=Math.abs(i)>17?this._position-(t-Math.abs(i)):this._position-i;this._element.style.transition="transform .2s ease-out",this._element.style.webkitTransition="-webkit-transform .2s ease-out",this._element.style.transform="translateY("+n+"px) translateZ(0)",this._element.style.webkitTransform="translateY("+n+"px) translateZ(0)",this._position=n,this._snapping=!0,this._element.addEventListener("transitionend",this._onTransitionEnd),this._element.addEventListener("webkitTransitionEnd",this._onTransitionEnd)},r.prototype.update=function(t){var i=this._element.offsetHeight-this._element.parentElement.offsetHeight;"number"==typeof t&&(this._position=-t*this._itemHeight),this._position<-i?this._position=-i:this._position>0&&(this._position=0),this._element.style.transform="translateY("+this._position+"px) translateZ(0)",this._element.style.webkitTransform="translateY("+this._position+"px) translateZ(0)",this._extent=i,this._scroll._extent=i},r.prototype.configuration=function(){return this._scroll.configuration()},window.exparser.registerElement({is:"wx-picker-view-column",template:'\n      <div id="main" class="wx-picker__group">\n        <div id="mask" class="wx-picker__mask"></div>\n        <div id="indicator" class="wx-picker__indicator"></div>\n        <div id="content" class="wx-picker__content"><slot></slot></div>\n      </div>\n    ',attached:function(){var t=this;this._observer=exparser.Observer.create(function(){t._handlers.update()}),this._observer.observe(this,{childList:!0,subtree:!0})},detached:function(){this.$.main.removeEventListener("touchstart",this.__handleTouchStart),document.body.removeEventListener("touchmove",this.__handleTouchMove),document.body.removeEventListener("touchend",this.__handleTouchEnd),document.body.removeEventListener("touchcancel",this.__handleTouchEnd)},_getCurrent:function(){return this._current||0},_setCurrent:function(t){this._current=t},_setStyle:function(t){this.$.indicator.setAttribute("style",t)},_setHeight:function(t){for(var i=this.$.indicator.offsetHeight,n=this.$.content.children,e=0,s=n.length;e<s;e++){var o=n.item(e);o.style.height=i+"px",o.style.overflow="hidden"}this._itemHeight=i,this.$.main.style.height=t+"px";var r=(t-i)/2;this.$.mask.style.backgroundSize="100% "+r+"px",this.$.indicator.style.top=r+"px",this.$.content.style.padding=r+"px 0"},_init:function(){var t=this;this._touchInfo={trackingID:-1,maxDy:0,maxDx:0},this._handlers=new r(this.$.content,this._current,this._itemHeight),this._handlers.snapCallback=function(i){i!==t._current&&(t._current=i,t.triggerEvent("wxPickerColumnValueChanged",{idx:i},{bubbles:!0}))},this.__handleTouchStart=this._handleTouchStart.bind(this),this.__handleTouchMove=this._handleTouchMove.bind(this),this.__handleTouchEnd=this._handleTouchEnd.bind(this),this.$.main.addEventListener("touchstart",this.__handleTouchStart),document.body.addEventListener("touchmove",this.__handleTouchMove),document.body.addEventListener("touchend",this.__handleTouchEnd),document.body.addEventListener("touchcancel",this.__handleTouchEnd)},_update:function(){this._handlers.update(this._current)},_findDelta:function(t){var i=this._touchInfo;if("touchmove"!=t.type&&"touchend"!=t.type)return{x:t.screenX-i.x,y:t.screenY-i.y};for(var n=t.changedTouches||t.touches,e=0;e<n.length;e++)if(n[e].identifier==i.trackingID)return{x:n[e].pageX-i.x,y:n[e].pageY-i.y};return null},_handleTouchStart:function(t){var i=this._touchInfo;if(-1==i.trackingID){var n=this._handlers;if(n){if("touchstart"==t.type){var e=t.changedTouches||t.touches;i.trackingID=e[0].identifier,i.x=e[0].pageX,i.y=e[0].pageY}else i.trackingID="mouse",i.x=t.screenX,i.y=t.screenY;i.maxDx=0,i.maxDy=0,i.historyX=[0],i.historyY=[0],i.historyTime=[t.timeStamp],i.listener=n,n.onTouchStart&&n.onTouchStart()}}},_handleTouchMove:function(t){var i=this._touchInfo;if(-1!=i.trackingID){t.preventDefault();var n=this._findDelta(t);if(n){for(i.maxDy=Math.max(i.maxDy,Math.abs(n.y)),i.maxDx=Math.max(i.maxDx,Math.abs(n.x)),i.historyX.push(n.x),i.historyY.push(n.y),i.historyTime.push(t.timeStamp);i.historyTime.length>10;)i.historyTime.shift(),i.historyX.shift(),i.historyY.shift();i.listener&&i.listener.onTouchMove&&i.listener.onTouchMove(n.x,n.y,t.timeStamp)}}},_handleTouchEnd:function(t){var i=this._touchInfo;if(-1!=i.trackingID){t.preventDefault();var n=this._findDelta(t);if(n){var e=i.listener;i.trackingID=-1,i.listener=null;var s=i.historyTime.length,o={x:0,y:0};if(s>2)for(var r=i.historyTime.length-1,h=i.historyTime[r],a=i.historyX[r],_=i.historyY[r];r>0;){r--;var c=i.historyTime[r],u=h-c;if(u>30&&u<50){o.x=(a-i.historyX[r])/(u/1e3),o.y=(_-i.historyY[r])/(u/1e3);break}}i.historyTime=[],i.historyX=[],i.historyY=[],e&&e.onTouchEnd&&e.onTouchEnd(n.x,n.y,o)}}}})}()}});